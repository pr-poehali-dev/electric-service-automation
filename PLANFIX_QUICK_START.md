# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ü–ª–∞–Ω—Ñ–∏–∫—Å

## 3 —à–∞–≥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### 1Ô∏è‚É£ –°–æ–∑–¥–∞–π—Ç–µ API –∫–ª—é—á –≤ –ü–ª–∞–Ω—Ñ–∏–∫—Å

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://konigkomfort.planfix.ru/account/api/
2. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å –∫–ª—é—á"**
3. –ù–∞–∑–≤–∞–Ω–∏–µ: `–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∞–π—Ç–æ–º`
4. ‚ö†Ô∏è **–í–∫–ª—é—á–∏—Ç–µ –ø—Ä–∞–≤–∞:**
   - ‚úÖ `task.create` - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á
   - ‚úÖ `task.get` - –ß—Ç–µ–Ω–∏–µ –∑–∞–¥–∞—á
   - ‚úÖ `task.update` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏ **—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ API –∫–ª—é—á**

### 2Ô∏è‚É£ –î–æ–±–∞–≤—å—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ –ø—Ä–æ–µ–∫—Ç

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ poehali.dev –¥–æ–±–∞–≤—å—Ç–µ:

| –°–µ–∫—Ä–µ—Ç | –ó–Ω–∞—á–µ–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|--------|----------|--------|
| `PLANFIX_API_KEY` | API –∫–ª—é—á –∏–∑ —à–∞–≥–∞ 1 | `a1b2c3d4e5f6g7h8...` |
| `PLANFIX_ACCOUNT` | –ù–∞–∑–≤–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ –ë–ï–ó .planfix.ru | `konigkomfort` |

### 3Ô∏è‚É£ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: https://electric-service-automation.poehali.dev/all-orders
2. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
3. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞—è–≤–∫—É –¥–ª—è –ü–ª–∞–Ω—Ñ–∏–∫—Å"** (–≤–Ω–∏–∑—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ü–ª–∞–Ω—Ñ–∏–∫—Å - –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞

## –ì–æ—Ç–æ–≤–æ! üéâ

–¢–µ–ø–µ—Ä—å –≤—Å–µ –Ω–æ–≤—ã–µ –∑–∞—è–≤–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ –ü–ª–∞–Ω—Ñ–∏–∫—Å–µ.

---

## –•–æ—Ç–∏—Ç–µ –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—é—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é?

–ß—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ü–ª–∞–Ω—Ñ–∏–∫—Å–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–ª–∏ —Å–∞–π—Ç:

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://konigkomfort.planfix.ru/account/api/webhooks
2. –°–æ–∑–¥–∞–π—Ç–µ webhook —Å URL:
   ```
   https://functions.poehali.dev/fa59900f-ff39-40ef-99de-7d268159765e?webhook=true
   ```
3. –í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–±—ã—Ç–∏—è: `task.created`, `task.updated`, `task.status.changed`

üìñ **–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** [PLANFIX_SETUP.md](./PLANFIX_SETUP.md)

---

## –ü—Ä–æ–±–ª–µ–º—ã?

### ‚ùå "Scope denied, method not allowed"
API –∫–ª—é—á –Ω–µ –∏–º–µ–µ—Ç –ø—Ä–∞–≤ `task.create`. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ —à–∞–≥ 1 –∏ –≤–∫–ª—é—á–∏—Ç–µ –Ω—É–∂–Ω—ã–µ –ø—Ä–∞–≤–∞.

### ‚ùå "PLANFIX_API_KEY –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
–î–æ–±–∞–≤—å—Ç–µ —Å–µ–∫—Ä–µ—Ç –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ (—à–∞–≥ 2).

### ‚ùå –ó–∞–¥–∞—á–∞ –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ poehali.dev
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–µ–∫—Ä–µ—Ç—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–≤–µ–¥–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ API –∫–ª—é—á –∞–∫—Ç–∏–≤–µ–Ω –≤ –ü–ª–∞–Ω—Ñ–∏–∫—Å–µ
